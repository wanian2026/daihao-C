# 币安期货自动交易系统 - GUI功能说明

## 系统概述

本系统是一个功能完整的币安期货自动交易系统，支持多合约标的筛选与自动交易。新增了**参数手动调整**、**实时结果显示**和**手动干预**功能。

## 新增功能

### 1. ⚙️ 参数配置标签页

所有策略参数都可以通过界面手动调整，无需修改代码。

#### 支持的参数类别：

##### 假突破策略参数
- **摆动点检测周期** (3-10): 用于识别结构高低点的周期
- **突破确认K线数** (1-5): 突破后需要多少根K线确认
- **假突破确认K线数** (1-3): 假突破需要多少根K线确认
- **K线实体占比** (0.1-0.8): K线实体的最小占比
- **最大结构位数量** (10-50): 保留的最大结构位数量
- **结构位有效K线数** (20-100): 结构位有效的K线数范围

##### 风险管理参数
- **最大回撤百分比** (%): 允许的最大回撤
- **最大连续亏损次数**: 连续亏损多少次后停止交易
- **每日亏损限制** (USDT): 每日最大亏损金额
- **单笔风险比例** (0.01-0.1): 单笔交易占总资金的比例
- **最大仓位比例** (0.1-0.5): 最大持仓比例
- **杠杆倍数** (1-20): 使用的杠杆倍数

##### 交易价值过滤参数
- **最小盈亏比** (1.5-5.0): 最小盈亏比要求
- **最小预期波动** (%): 最小预期波动百分比
- **成本倍数** (1.5-3.0): 预期波动必须大于成本的倍数
- **最小ATR比例** (0.005-0.03): 最小ATR比例

##### 执行闸门参数
- **最小交易间隔** (分钟): 两次交易之间的最小间隔
- **每日最大交易次数**: 每日最多交易次数
- **最小信号置信度** (0.5-1.0): 接受信号的最小置信度
- **最大点差百分比** (%): 允许的最大点差

##### 系统运行参数
- **主循环间隔** (秒): 策略主循环的执行间隔
- **数据刷新间隔** (秒): 数据刷新的间隔
- **最大监控标的数**: 最多监控的合约数量

#### 参数操作：
- **💾 保存并应用**: 保存参数并立即应用到运行中的系统
- **🔄 重置为默认值**: 将所有参数恢复为默认值
- **📋 导出配置**: 将当前配置导出到剪贴板（JSON格式）

### 2. 📊 实时结果显示（增强版）

#### 市场监控标签页增强：
- **系统状态栏**：显示系统运行状态、市场状态、循环次数
- **市场指标**：实时显示ATR、成交量比率、资金费率、活跃评分
- **实时日志**：滚动显示所有系统日志，包括：
  - 策略启动/停止
  - 信号发现
  - 交易执行
  - 参数更新
  - 错误信息

#### 风险管理标签页：
- 实时显示风险指标：
  - 总交易次数、盈利次数、亏损次数、胜率
  - 总盈亏、当前余额、最大回撤、每日盈亏
  - 连续亏损、平均盈利、平均亏损、熔断状态

#### 假突破信号标签页：
- 显示所有发现的假突破信号
- 包括信号类型、入场价、止损、止盈、置信度、原因

### 3. 🎮 手动控制标签页

#### 系统控制：
- **启动策略**: 启动自动交易策略
- **停止策略**: 完全停止策略
- **暂停策略**: 暂停策略（不停止系统）
- **恢复策略**: 从暂停状态恢复运行
- **模拟模式开关**: 切换模拟/实盘模式

#### 手动交易：
- **合约选择**: 输入或从监控复制交易合约
- **交易方向**: 选择做多或做空
- **交易数量**: 输入交易金额（USDT）
- **止损止盈**: 设置止损和止盈百分比
- **执行按钮**:
  - 🟢 手动做多: 执行做多交易
  - 🔴 手动做空: 执行做空交易

#### 持仓管理：
- **刷新持仓**: 获取当前持仓列表
- **全部平仓**: 平掉所有持仓
- **平选中的**: 平掉选中的持仓

## 使用流程

### 1. 启动系统
```bash
python3 eth_fakeout_gui.py
```

### 2. 登录
- 在"🔐 登录"标签页输入币安API Key和Secret
- 勾选"保存凭证"可以加密存储凭证
- 点击"登录系统"

### 3. 配置参数（可选）
- 切换到"⚙️ 参数配置"标签页
- 根据需要调整各项参数
- 点击"💾 保存并应用"

### 4. 选择标的
- 切换到"🎯 标的选择"标签页
- 选择自动模式（综合评分/成交量/波动率）或手动模式
- 点击"✅ 应用选择"

### 5. 启动策略
- 切换到"📊 市场监控"或"🎮 手动控制"标签页
- 勾选"模拟模式"（推荐）
- 点击"▶️ 启动策略"

### 6. 监控运行
- 在"📊 市场监控"标签页查看实时日志
- 在"💡 假突破信号"标签页查看发现的信号
- 在"🛡️ 风险管理"标签页查看风险指标

### 7. 手动干预（可选）
- 切换到"🎮 手动控制"标签页
- 可以暂停/恢复/停止策略
- 可以手动开仓/平仓
- 可以查看和管理持仓

## 特点

1. **实时参数调整**: 所有参数可以在系统运行时动态调整，无需重启
2. **全面的手动控制**: 可以随时暂停、恢复或完全停止策略
3. **手动交易功能**: 支持独立的手动开仓和平仓操作
4. **实时监控**: 全面显示系统状态、市场指标和交易信号
5. **风险管理**: 完整的风险管理和熔断机制
6. **安全优先**: 默认启用模拟模式，确保资金安全

## 注意事项

1. **模拟模式**: 首次使用建议先在模拟模式下充分测试
2. **参数调整**: 调整参数前建议了解各参数的含义和影响
3. **手动交易**: 手动交易时请务必确认所有参数
4. **持仓管理**: 平仓前请确认持仓信息
5. **API权限**: 需要币安期货交易权限的API密钥

## 技术架构

- **GUI框架**: Tkinter（Python内置）
- **参数管理**: parameter_config.py（集中式配置）
- **系统核心**: eth_fakeout_strategy_system.py（多标的策略系统）
- **实时更新**: 通过回调函数实现界面实时更新

## 文件结构

```
.
├── eth_fakeout_gui.py              # GUI主程序（新增参数配置和手动控制）
├── eth_fakeout_strategy_system.py  # 策略系统（新增参数动态更新）
├── parameter_config.py             # 参数配置模块（新增）
├── fakeout_strategy.py             # 假突破策略
├── risk_manager.py                 # 风险管理器
├── worth_trading_filter.py         # 交易价值过滤器
├── symbol_selector.py              # 合约选择器
├── market_state_engine.py          # 市场状态引擎
├── data_fetcher.py                # 数据获取器
└── test_gui_parameters.py         # 测试脚本（新增）
```

## 快速开始

```python
# 1. 运行GUI
python3 eth_fakeout_gui.py

# 2. 登录币安API
# 3. 选择标的（或使用默认ETHUSDT）
# 4. 启动策略（模拟模式）
# 5. 观察实时日志和信号
# 6. 根据需要调整参数
# 7. 充分测试后切换到实盘模式
```

## 支持与帮助

如遇到问题，请检查：
1. API密钥是否正确
2. 网络连接是否正常
3. 参数设置是否合理
4. 系统日志中的错误信息

祝交易顺利！
