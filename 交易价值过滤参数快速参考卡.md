# 交易价值过滤参数快速参考卡

## 📋 参数总览

| 参数名 | 默认值 | 含义 | 作用 |
|--------|--------|------|------|
| `min_rr_ratio` | 2.0 | 最小盈亏比 | 确保盈利至少是风险的2倍 |
| `min_expected_move` | 0.005 | 最小预期波动 | 过滤波动太小的情况 |
| `cost_multiplier` | 2.0 | 成本倍数 | 预期波动必须大于成本的N倍 |
| `min_atr_ratio` | 0.01 | 最小ATR比例 | 衡量市场活跃度 |

---

## 🎯 预设配置

### 保守型（安全第一）

```python
min_rr_ratio = 2.5
min_expected_move = 0.006
cost_multiplier = 2.5
min_atr_ratio = 0.012
```

**特点**：
- ✅ 胜率高（60%-70%）
- ✅ 最大回撤小（<5%）
- ⚠️ 交易频率低（每天3-5笔）
- ⚠️ 可能错过机会

**适合**：新手、小资金、风险厌恶

---

### 平衡型（默认推荐）⭐

```python
min_rr_ratio = 2.0
min_expected_move = 0.005
cost_multiplier = 2.0
min_atr_ratio = 0.01
```

**特点**：
- ✅ 胜率适中（50%-60%）
- ✅ 盈亏比健康（2:1）
- ✅ 交易频率合理（每天8-12笔）
- ✅ 最大回撤可控（5%-8%）

**适合**：有经验的交易者、中等风险承受能力

---

### 激进型（追求机会）

```python
min_rr_ratio = 1.5
min_expected_move = 0.003
cost_multiplier = 1.5
min_atr_ratio = 0.006
```

**特点**：
- ✅ 交易频率高（每天15-20笔）
- ✅ 捕捉更多机会
- ⚠️ 胜率低（40%-50%）
- ⚠️ 最大回撤大（8%-15%）

**适合**：有丰富经验、高风险承受能力、大资金

---

## 📊 参数影响分析

### min_rr_ratio 的影响

| 参数值 | 适用场景 | 交易频率 | 胜率 |
|--------|---------|---------|------|
| 1.5 | 激进策略 | 高 | 低 |
| 1.8 | 轻度激进 | 较高 | 中低 |
| 2.0 | 平衡策略 | 中等 | 中等 |
| 2.5 | 保守策略 | 低 | 高 |
| 3.0 | 极度保守 | 极低 | 极高 |

**示例**：如果市场盈亏比为 2.35
- 1.5: ✅ 通过（2.35 > 1.5）
- 2.0: ✅ 通过（2.35 > 2.0）
- 2.5: ❌ 未通过（2.35 < 2.5）

---

### min_expected_move 的影响

| 参数值 | 适用场景 | 市场要求 |
|--------|---------|---------|
| 0.3% | 激进策略 | 低波动也可 |
| 0.5% | 平衡策略 | 正常波动 |
| 0.8% | 保守策略 | 需要较高波动 |
| 1.0% | 极度保守 | 只在高波动市场 |

**示例**：如果市场波动为 0.85%
- 0.3%: ✅ 通过（0.85% > 0.3%）
- 0.5%: ✅ 通过（0.85% > 0.5%）
- 0.8%: ✅ 通过（0.85% > 0.8%）
- 1.0%: ❌ 未通过（0.85% < 1.0%）

---

### cost_multiplier 的影响

| 参数值 | 成本要求 | 说明 |
|--------|---------|------|
| 1.5 | 预期波动 > 成本 × 1.5 | 接受较小盈利空间 |
| 2.0 | 预期波动 > 成本 × 2.0 | 确保盈亏平衡 |
| 2.5 | 预期波动 > 成本 × 2.5 | 要求更高盈利空间 |
| 3.0 | 预期波动 > 成本 × 3.0 | 极度谨慎 |

**交易成本计算**：
```
交易成本 = taker_fee × 2 + 点差 + 滑点
        = 0.05% × 2 + 0.05% + 0.05%
        ≈ 0.15% - 0.20%
```

**示例**：交易成本为 0.15%，市场波动为 0.85%
- 1.5: ✅ 通过（0.85% > 0.15% × 1.5 = 0.225%）
- 2.0: ✅ 通过（0.85% > 0.15% × 2.0 = 0.300%）
- 2.5: ✅ 通过（0.85% > 0.15% × 2.5 = 0.375%）
- 3.0: ✅ 通过（0.85% > 0.15% × 3.0 = 0.450%）

---

## 🛠️ 调整方法

### 方法 1：GUI 调整（推荐）

1. 启动程序：`python3 eth_fakeout_gui.py`
2. 切换到 **"⚙️ 参数配置"** 标签页
3. 找到 **"交易价值过滤"** 部分
4. 修改参数值
5. 点击 **"💾 保存并应用"**

✅ **优点**：实时生效，无需重启

---

### 方法 2：代码修改

编辑 `parameter_config.py`：

```python
@dataclass
class WorthTradingFilterConfig:
    """交易价值过滤参数"""
    min_rr_ratio: float = 2.0                # 修改这里
    min_expected_move: float = 0.005         # 修改这里
    cost_multiplier: float = 2.0             # 修改这里
    min_atr_ratio: float = 0.01               # 修改这里
```

⚠️ **注意**：需要重启程序生效

---

### 方法 3：运行时动态调整

```python
from parameter_config import get_config

config = get_config()

# 调整参数
config.worth_trading_filter.min_rr_ratio = 1.8

# 应用到策略系统
if strategy_system:
    strategy_system.update_parameters(config.to_dict())
```

✅ **优点**：立即生效，灵活控制

---

## 🧪 测试工具

### 离线测试（推荐）

```bash
python3 test_worth_trading_params_simple.py
```

功能：
- ✅ 比较不同配置效果
- ✅ 测试单个参数影响
- ✅ 参数调优演示
- ✅ 无需网络连接

---

### 在线测试

```bash
python3 test_worth_trading_params.py
```

功能：
- ✅ 使用真实市场数据
- ✅ 测试多个交易对
- ✅ 实时评估效果
- ⚠️ 需要网络连接

---

## 📝 调整建议

### 何时收紧参数？

**信号**：
- ❌ 交易过于频繁（每天 > 15 笔）
- ❌ 连续亏损增加
- ❌ 盈亏比持续低于 1.8
- ❌ 胜率低于 45%

**措施**：
- `min_rr_ratio`：+0.2 ~ +0.5
- `min_expected_move`：+0.1% ~ +0.2%
- `cost_multiplier`：+0.5 ~ +1.0

---

### 何时放宽参数？

**信号**：
- ❌ 交易太少（每天 < 3 笔）
- ❌ 长期无交易信号
- ❌ 错过明显的机会
- ❌ 市场活跃但未触发交易

**措施**：
- `min_rr_ratio`：-0.2 ~ -0.3
- `min_expected_move`：-0.1% ~ -0.2%
- `cost_multiplier`：-0.5 ~ -1.0

---

### 市场环境适配

| 市场环境 | 调整方向 | 原因 |
|---------|---------|------|
| 牛市（高波动） | 收紧参数 | 避免追高风险 |
| 熊市（低波动） | 放宽参数 | 增加交易机会 |
| 震荡市 | 保持默认 | 平衡策略 |
| 重大事件 | 收紧参数 | 降低风险 |
| 节假日 | 收紧参数 | 流动性降低 |

---

## ⚠️ 风险提示

1. **不要一次性调整多个参数**
   - 建议：每次只调整一个参数，观察效果后再调整其他

2. **模拟模式充分测试**
   - 建议：在模拟模式下运行 1-2 周后再实盘

3. **密切监控调整后的效果**
   - 建议：调整后观察 1-2 周，确保效果符合预期

4. **极端参数可能适得其反**
   - 太保守：错过所有机会
   - 太激进：频繁交易，成本高昂

5. **记录每次调整的原因和效果**
   - 建议：建立参数调整日志，方便回顾和优化

---

## 📚 相关文档

- [交易价值过滤参数调整指南](./交易价值过滤参数调整指南.md) - 详细参数说明
- [参数优化说明文档](./参数优化说明文档.md) - 参数优化历史
- [测试脚本](./test_worth_trading_params_simple.py) - 离线测试工具

---

## 💡 快速决策树

```
开始调整参数
    │
    ├─ 你的风险承受能力？
    │   ├─ 低 → 保守型配置
    │   ├─ 中 → 平衡型配置（默认）⭐
    │   └─ 高 → 激进型配置
    │
    ├─ 当前市场状态？
    │   ├─ 高波动 → 收紧参数
    │   ├─ 正常 → 保持默认
    │   └─ 低波动 → 放宽参数
    │
    ├─ 当前交易频率？
    │   ├─ 太多（>15笔/天）→ 收紧参数
    │   ├─ 正常（8-12笔/天）→ 保持
    │   └─ 太少（<3笔/天）→ 放宽参数
    │
    └─ 当前胜率？
        ├─ 低（<45%）→ 收紧参数
        ├─ 正常（50%-60%）→ 保持
        └─ 高（>65%）→ 可考虑放宽
```

---

**最后更新**：2026-01-08
