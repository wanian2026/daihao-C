# 币安合约信息监控应用

一个实时监控币安（Binance）平台合约信息和连接状态的桌面GUI应用程序。

## 功能特性

### ✅ 核心功能

1. **实时连接状态监控**
   - 自动检测与币安API的连接状态
   - 实时显示服务器时间
   - 连接状态可视化指示器（绿色=已连接，红色=断开，黄色=超时）

2. **合约信息获取**
   - 获取币安平台所有合约信息
   - 显示交易对、基础资产、计价资产、合约类型等
   - 显示价格精度和数量精度信息

3. **实时数据刷新**
   - 手动刷新合约数据
   - 自动监控模式（每5秒检测一次连接状态）

4. **合约搜索**
   - 支持按交易对名称搜索过滤
   - 实时显示搜索结果

### 📊 界面组件

- **顶部状态栏**：显示连接状态和服务器时间
- **控制面板**：连接、刷新、监控按钮
- **合约信息表格**：显示所有合约的详细信息
- **系统日志**：记录所有操作和事件
- **状态栏**：显示当前操作状态

## 运行方法

### 前置要求

1. **Python 3.6+**
   - 在终端运行 `python3 --version` 检查版本
   - 如未安装，访问 https://www.python.org/downloads/ 下载安装

2. **依赖库**
   - `requests` 库（用于HTTP请求）

### 方法一：双击运行（推荐）

1. 双击 `启动币安监控.command` 文件
2. 脚本会自动检查并安装依赖
3. 应用自动启动

### 方法二：命令行运行

```bash
# 1. 安装依赖
pip3 install requests

# 2. 运行应用
python3 binance_gui_app.py
```

## 使用说明

### 1. 连接币安

- 点击 **"🔗 连接币安"** 按钮
- 应用会自动连接到币安公共API
- 连接成功后，状态栏显示 **"🟢 已连接"**

### 2. 获取合约信息

连接成功后，应用会自动获取所有合约信息并显示在表格中。

你也可以手动点击 **"🔄 刷新数据"** 按钮重新获取数据。

### 3. 搜索合约

- 在搜索框中输入交易对名称（如 "BTC"）
- 表格会实时过滤显示匹配的合约

### 4. 实时监控

- 点击 **"▶️ 开始监控"** 按钮
- 应用会每5秒自动检测一次连接状态
- 点击 **"⏸️ 停止监控"** 停止监控

### 5. 查看日志

系统日志区域会记录所有操作：
- 连接/断开事件
- 数据获取结果
- 错误信息
- 监控状态变化

## API 接口说明

本应用使用币安期货（Futures）公共API，无需API密钥：

| 端点 | 功能 | 说明 |
|-----|------|------|
| `/fapi/v1/ping` | 测试连接 | 检查API服务是否可用 |
| `/fapi/v1/time` | 服务器时间 | 获取币安服务器时间 |
| `/fapi/v1/exchangeInfo` | 交易信息 | 获取交易规则和交易对信息 |

**API基础URL**: `https://fapi.binance.com`

**官方文档**: https://binance-docs.github.io/apidocs/futures/cn/

## 项目结构

```
.
├── binance_api_client.py    # 币安API客户端模块
├── binance_gui_app.py       # GUI应用主程序
├── 启动币安监控.command       # Mac启动脚本
└── BINANCE_README.md        # 本文档
```

## 模块说明

### binance_api_client.py

币安API客户端，提供以下方法：

- `ping()` - 测试API连接
- `get_server_time()` - 获取服务器时间
- `get_exchange_info()` - 获取交易信息
- `get_all_symbols()` - 获取所有交易对
- `get_24h_ticker()` - 获取24小时价格数据
- `get_contract_info()` - 获取合约信息
- `get_connection_status()` - 获取连接状态

### binance_gui_app.py

GUI应用主程序，功能包括：

- 连接状态实时显示
- 合约信息表格展示
- 搜索过滤功能
- 自动监控模式
- 系统日志记录

## 注意事项

### ⚠️ 网络连接

- 本应用需要连接到币安公共API
- 确保网络连接正常
- 如果连接失败，请检查：
  - 网络连接状态
  - 防火墙设置
  - 币安服务是否可用

### ⚠️ 速率限制

币安API有请求速率限制：
- 公共API通常限制为 1200 请求/分钟
- 本应用已做了基本的频率控制
- 避免频繁手动刷新数据

### ⚠️ 数据延迟

- 公共API可能有轻微的数据延迟
- 实时监控模式下连接检测间隔为5秒
- 如需实时行情数据，建议使用WebSocket（后续版本可添加）

## 常见问题

### Q1: 连接失败怎么办？

**A**: 请检查以下几点：
1. 确保网络连接正常
2. 尝试在浏览器访问 https://fapi.binance.com/fapi/v1/ping
3. 检查是否有防火墙阻止连接
4. 确认币安服务是否正常

### Q2: 为什么看不到合约数据？

**A**: 请确保：
1. 已成功连接到币安API（状态显示"已连接"）
2. 点击了"刷新数据"按钮
3. 查看日志区域是否有错误信息

### Q3: 如何退出应用？

**A**:
- 点击窗口左上角的红色关闭按钮
- 在确认对话框中点击"确定"

### Q4: 支持哪些合约类型？

**A**: 本应用支持币安期货平台的所有合约类型：
- 永续合约（PERPETUAL）
- 交割合约（DELIVERY）
- 等（根据平台更新）

## 开发说明

### 添加新功能

本应用采用模块化设计，方便扩展：

1. **添加新的API端点**：在 `BinanceAPIClient` 类中添加新方法
2. **添加新的UI组件**：在 `BinanceMonitorApp.create_widgets()` 中添加
3. **添加新的监控数据**：在 `monitor_loop()` 中添加

### 示例：添加24小时价格数据

```python
# 在 binance_api_client.py 中添加
def get_24h_price(self, symbol: str) -> Dict:
    return self.get_24h_ticker(symbol)

# 在 binance_gui_app.py 中添加显示
def show_24h_price(self, symbol: str):
    price_data = self.api_client.get_24h_price(symbol)
    # 显示价格数据...
```

## 后续计划

- [ ] 添加WebSocket实时行情
- [ ] 添加价格走势图表
- [ ] 添加K线数据展示
- [ ] 添加价格预警功能
- [ ] 支持自定义交易对收藏
- [ ] 数据导出功能（CSV/Excel）

## 免责声明

本应用仅用于学习和研究目的，不构成投资建议。使用币安API需要遵守币安的服务条款和API使用规范。作者不对因使用本应用造成的任何损失负责。

## 许可证

MIT License

## 技术支持

如有问题或建议，欢迎反馈。

---

**祝使用愉快！** 🚀
